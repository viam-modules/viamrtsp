syntax = "proto3";

package viammodules.service.videostore.v1;

option go_package = "./videostore-api";

service videostoreService {
  rpc FetchStream(FetchStreamRequest) returns (stream FetchStreamResponse);
  rpc Fetch(FetchRequest) returns (FetchResponse);
  rpc Save(SaveRequest) returns (SaveResponse);
}

message FetchStreamRequest {
  string name = 1;
  string from = 2;
  string to = 3;
  string container = 4; // e.g., "mp4", "fmp4"
}

message FetchStreamResponse {
  bytes video_data = 1;
}

message FetchRequest {
  string name = 1;
  string from = 2;
  string to = 3;
  string container = 4; // e.g., "mp4", "fmp4"
}

message FetchResponse {
  // Raw video bytes for the requested interval
  bytes video_data = 1;
}

message SaveRequest {
  string name = 1;
  string from = 2;
  string to = 3;
  string container = 4; // e.g., "mp4", "fmp4"
}

message SaveResponse {
  // Filename (or identifier) of the saved artifact
  string filename = 1;
}
